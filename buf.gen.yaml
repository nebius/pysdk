version: v2
plugins:
  - remote: buf.build/protocolbuffers/python
    out: src/nebius/api
  - remote: buf.build/grpc/python
    out: src/nebius/api
  - remote: buf.build/protocolbuffers/pyi
    out: src/nebius/api
  - local: ["python", "-m", "nebius.base.protos.compiler.main"]
    opt:
    - log_level=DEBUG
    - import_substitution=nebius=nebius.api.nebius
    - import_substitution=buf=nebius.api.buf
    - skip=google
    - skip=buf
    # - debugger_connect=localhost:56790
    out: src/nebius/api
    strategy: directory
  # - plugin: python_betterproto
  #   opt:
  #   - INCLUDE_GOOGLE
  #   - typing.root
  #   - pydantic_dataclasses
  #   out: src/nebius/better_api
  #   strategy: directory
